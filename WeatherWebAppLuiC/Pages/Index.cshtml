@page
@model IndexModel
@{
    ViewData["Title"] = "Search";
}

<div class="text-center">
    <h1 class="display-4">Welcome to the Weather Web App</h1>
</div>

<div class="hero-wrapper" style="position:relative; width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); overflow:hidden;">
    <img src="/Images/Main/20250401_190146.jpg" alt="London Skyline Sunny Weather" style="position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center; z-index:0;" />
    <div class="hero-content">
        <form method="post" style="width:90%; max-width:900px; background-image: linear-gradient(126.6deg, rgba(44,115,210,1) 3.4%, rgba(251,234,255,1) 127.9%); padding:16px; border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,0.18); transform: translateY(-2vh);">
            <input asp-for="City" id="CityInput" type="text" class="form-control d-inline-block w-100" placeholder="Input city here!" style="max-width:850px;" />
            <input asp-for="Lat" type="hidden" id="Lat" />
            <input asp-for="Lon" type="hidden" id="Lon" />
            <div id="city-suggestions" class="autocomplete-items" style="position:relative; z-index:1000;"></div>
            <div style="text-align:center; margin-top:8px;"><button type="submit" class="center-button">Search</button></div>
        </form>
    </div>
    <p style="position: absolute; bottom: 12px; left: 16px; margin:0; color: #fff; text-shadow: 0 1px 4px rgba(0,0,0,0.6); z-index:2;">Image of Greenwich Park (Lui Contreras, 2025)</p>
</div>

@if (Model.Weather != null)
{
    <div class="mt-3 text-center">
        <strong>@Model.Weather.City</strong>: @Model.Weather.WeatherDescription, @Model.Weather.TempsDisplay
    </div>
}

@* Preloaded city cards for New York and Tokyo *@
@if (Model.PreloadedWeathers != null && Model.PreloadedWeathers.Count > 0)
{
    <div style="display:flex; gap:1rem; justify-content:center; margin-top:1.5rem; flex-wrap:wrap;">
        @foreach (var w in Model.PreloadedWeathers)
        {
            <div style="background:#f5f5f5; border-radius:8px; padding:1rem; text-align:center; width:180px; box-shadow:0 2px 6px #0001; background: #808080;">
                <div style="font-weight:600; margin-bottom:0.25rem;">@w.City</div>
                <img src="@(w.HourlyForecast.FirstOrDefault()?.IconName ?? "https://openweathermap.org/img/wn/03d@2x.png")" alt="Weather Icon" style="max-width:80px; display:block; margin:0.25rem auto;" />
                <div style="font-size:1.1rem; font-weight:400; margin-top:0.5rem;">@w.TempsDisplay</div>
            </div>
        }
    </div>
}

<!-- Ensure site.js is loaded for autocomplete functionality -->
<script src="~/js/site.js"></script>